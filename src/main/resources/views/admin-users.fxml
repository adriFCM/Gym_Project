<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.gym.ui.controllers.AdminUsersController"
            styleClass="admin-root">

    <!-- TOP: title + back button -->
    <top>
        <HBox spacing="10" alignment="CENTER_LEFT" styleClass="admin-toolbar">
            <Label text="Manage users (members &amp; trainers)"
                   styleClass="admin-title"/>
            <Pane HBox.hgrow="ALWAYS"/>
            <Button text="Back to dashboard"
                    onAction="#onBackClicked"
                    styleClass="back-button"/>
        </HBox>
    </top>

    <!-- CENTER: table + create / delete form -->
    <center>
        <VBox spacing="10" styleClass="admin-center">

            <!-- Users table -->
            <TableView fx:id="usersTable"
                       prefHeight="250"
                       prefWidth="800"
                       styleClass="admin-table">
                <columns>
                    <TableColumn fx:id="idColumn" text="ID" prefWidth="60"/>
                    <TableColumn fx:id="usernameColumn" text="Username" prefWidth="150"/>
                    <TableColumn fx:id="emailColumn" text="Email" prefWidth="220"/>
                    <TableColumn fx:id="roleColumn" text="Role" prefWidth="110"/>
                    <TableColumn fx:id="createdAtColumn" text="Created at" prefWidth="180"/>
                </columns>
            </TableView>

            <!-- Form -->
            <TitledPane text="Create member or trainer"
                        expanded="true"
                        styleClass="admin-titled-pane">
                <content>
                    <VBox spacing="10" styleClass="admin-form">

                        <GridPane hgap="12" vgap="10">
                            <columnConstraints>
                                <ColumnConstraints prefWidth="100"/>
                                <ColumnConstraints prefWidth="260"/>
                                <ColumnConstraints prefWidth="100"/>
                                <ColumnConstraints prefWidth="260"/>
                            </columnConstraints>

                            <children>
                                <!-- Row 0 -->
                                <Label text="Username:" styleClass="admin-label"
                                       GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                <TextField fx:id="usernameField"
                                           promptText="username"
                                           GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                                <Label text="Password:" styleClass="admin-label"
                                       GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                                <PasswordField fx:id="passwordField"
                                               promptText="password"
                                               GridPane.rowIndex="0" GridPane.columnIndex="3"/>

                                <!-- Row 1 -->
                                <Label text="Email:" styleClass="admin-label"
                                       GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                                <TextField fx:id="emailField"
                                           promptText="email@example.com"
                                           GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                                <Label text="Role:" styleClass="admin-label"
                                       GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                                <ComboBox fx:id="roleComboBox"
                                          promptText="MEMBER or TRAINER"
                                          GridPane.rowIndex="1" GridPane.columnIndex="3"/>
                            </children>
                        </GridPane>

                        <HBox spacing="10">
                            <Button text="Add user"
                                    onAction="#onAddUserClicked"
                                    styleClass="primary-button"/>
                            <Button text="Delete selected user"
                                    onAction="#onDeleteUserClicked"
                                    styleClass="danger-button"/>
                            <Pane HBox.hgrow="ALWAYS"/>
                            <Button text="Clear form"
                                    onAction="#onClearFormClicked"
                                    styleClass="secondary-button"/>
                        </HBox>

                    </VBox>
                </content>
            </TitledPane>

        </VBox>
    </center>

</BorderPane>
